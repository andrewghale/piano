{"version":3,"sources":["intervals.js","main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["// const note1 = document.getElementById(\"note1Field\")\n// const note2 = document.getElementById(\"note2Field\")\n// const note3 = document.getElementById(\"note3Field\")\n// const note4 = document.getElementById(\"note4Field\")\n// const button = document.getElementById(\"submitGuess\")\nconst result = document.getElementById(\"result\")\n\nlet allowed = true\nlet notesArr = []\nlet skippedNote = false\nconst chordTypes = [\n  { name: 'augmented', code: '0.4.8', quality: 'augmented' },\n  {\n    name: 'augmented-eleventh',\n    code: '0.4.7.10.14.18',\n    quality: 'major'\n  },\n  {\n    name: 'augmented-major-seventh',\n    code: '0.4.8.11',\n    quality: 'augmented'\n  },\n  { name: 'augmented-seventh', code: '0.4.8.10', quality: 'augmented' },\n  {\n    name: 'augmented-sixth',\n    code: '0.6.10',\n    quality: 'predominant'\n  },\n  { name: 'diminished', code: '0.3.6', quality: 'diminished' },\n  {\n    name: 'diminished-major-seventh',\n    code: '0.3.6.11',\n    quality: 'diminished'\n  },\n  {\n    name: 'diminished-seventh',\n    code: '0.3.6.9',\n    quality: 'diminished'\n  },\n  { name: 'dominant', code: '0.4.7', quality: 'major' },\n  {\n    name: 'dominant-eleventh',\n    code: '0.4.7.10.14.17',\n    quality: 'major'\n  },\n  {\n    name: 'dominant-minor-ninth',\n    code: '0.4.7.10.13',\n    quality: 'major'\n  },\n  { name: 'dominant-ninth', code: '0.4.7.10.14', quality: 'major' },\n  { name: 'dominant-parallel', code: '0.3.7', quality: 'minor' },\n  { name: 'dominant-seventh', code: '0.4.7.10', quality: 'major' },\n  {\n    name: 'dominant-seventh-flat-five',\n    code: '0.4.6.10',\n    quality: 'diminished'\n  },\n  {\n    name: 'dominant-seventh-sharp-nine',\n    code: '0.4.7.10.15',\n    quality: 'major'\n  },\n  {\n    name: 'dominant-thirteenth',\n    code: '0.4.7.10.14.17.9',\n    quality: 'major'\n  },\n  { name: 'dream', code: '0.5.6.7', quality: 'just' },\n  { name: 'elektra', code: '0.7.9.13.16', quality: 'bitonal' },\n  { name: 'farben', code: '0.8.11.16.21', quality: 'atonal' },\n  {\n    name: 'half-diminished-seventh',\n    code: '0.3.6.10',\n    quality: 'diminished'\n  },\n  { name: 'harmonic-seventh', code: '0.4.7.10', quality: 'major' },\n  { name: 'leading-tone-triad', code: '0.3.6', quality: 'diminished' },\n  { name: 'lydian', code: '0.4.7.11.18', quality: 'major' },\n  { name: 'magic', code: '0.1.5.6.10.12.15.17', quality: 'just' },\n  { name: 'major', code: '0.4.7', quality: 'major' },\n  { name: 'major-eleventh', code: '0.4.7.11.14.17', quality: 'major' },\n  { name: 'major-seventh', code: '0.4.7.11', quality: 'major' },\n  {\n    name: 'major-seventh-sharp-eleventh',\n    code: '0.4.8.11.18',\n    quality: 'augmented'\n  },\n  { name: 'major-sixth', code: '0.4.7.9', quality: 'major' },\n  { name: 'major-sixth-ninth', code: '0.4.7.9.14', quality: 'major' },\n  { name: 'major-ninth', code: '0.4.7.11.14', quality: 'major' },\n  {\n    name: 'major-thirteenth',\n    code: '0.4.7.11.14.18.9',\n    quality: 'major'\n  },\n  { name: 'mediant', code: '0.3.7', quality: 'minor' },\n  { name: 'minor', code: '0.3.7', quality: 'minor' },\n  { name: 'minor-eleventh', code: '0.3.7.10.14.17', quality: 'minor' },\n  { name: 'minor-major-seventh', code: '0.3.7.11', quality: 'minor' },\n  { name: 'minor-ninth', code: '0.3.7.10.14', quality: 'minor' },\n  { name: 'minor-seventh', code: '0.3.7.10', quality: 'minor' },\n  { name: 'minor-sixth', code: '0.3.7.9', quality: 'minor' },\n  { name: 'minor-sixth-ninth', code: '0.3.7.9.14', quality: 'minor' },\n  {\n    name: 'minor-thirteenth',\n    code: '0.3.7.10.14.17.9',\n    quality: 'minor'\n  },\n  { name: 'mu', code: '0.2.4.7', quality: 'major' },\n  { name: 'mystic', code: '0.6.10.16.21.14', quality: 'atonal' },\n  { name: 'neapolitan', code: '1.5.8', quality: 'major' },\n  {\n    name: 'ninth-augmented-fifth',\n    code: '0.4.8.10.14',\n    quality: 'augmented'\n  },\n  { name: 'ninth-flat-fifth', code: '0.4.6.10.14', quality: 'm3+d5' },\n  {\n    name: 'northern-lights',\n    code: '1.2.8.12.15.18.19.22.23.28.31',\n    quality: 'atonal'\n  },\n  {\n    name: '\"ode-to-napoleon\"-hexa',\n    code: '0.1.4.5.8.9',\n    quality: 'atonal'\n  },\n  { name: 'petrushka', code: '0.1.4.6.7.10', quality: 'bitonal' },\n  { name: 'power-p5', code: '0.7', quality: 'indeterminate' },\n  { name: 'psalms', code: '0.3.7', quality: 'minor' },\n  { name: 'secondary-dominant', code: '0.4.7', quality: 'major' },\n  {\n    name: 'secondary-leading-tone',\n    code: '0.3.6',\n    quality: 'diminished'\n  },\n  { name: 'secondary-supertonic', code: '0.3.7', quality: 'minor' },\n  { name: 'seven-six', code: '0.4.7.9.10', quality: 'major' },\n  {\n    name: 'seventh-suspension-four',\n    code: '0.5.7.10',\n    quality: 'suspended'\n  },\n  { name: 'so-what', code: '0.5.10.15.19', quality: 'bitonal' },\n  { name: 'suspended', code: '0.5.7', quality: 'suspended' },\n  { name: 'subdominant', code: '0.4.7', quality: 'major' },\n  { name: 'subdominant-parallel', code: '0.3.7', quality: 'minor' },\n  { name: 'submediant', code: '0.3.7', quality: 'minor' },\n  { name: 'subtonic', code: '0.4.7', quality: 'major' },\n  { name: 'supertonic', code: '0.3.7', quality: 'minor' },\n  // {\n  //   name: 'thirteenth-flat-ninth',\n  //   code: '0.4.7.10.13.NaN.NaN',\n  //   quality: 'major'\n  // },\n  // {\n  //   name: 'thirteenth-flat-ninth-flat-fifth',\n  //   code: '0.4.6.10.13.NaN.NaN',\n  //   quality: 'm3+d5'\n  // },\n  { name: 'tonic-counter-parallel', code: '0.3.7', quality: 'minor' },\n  { name: 'tonic', code: '0.4.7', quality: 'major' },\n  { name: 'tonic-parallel', code: '0.3.7', quality: 'minor' },\n  { name: 'tristan', code: '0.3.6.10', quality: 'predominant' },\n  { name: 'viennese-tri', code: '0.6.7', quality: 'atonal' }\n]\n\nconst sortingArr = [ \"C4\",\"C#4\",\"D4\",\"D#4\",\"E4\",\"F4\",\"F#4\",\"G4\",\"G#4\",\"A4\",\"A#4\",\"B4\",\"C5\",\"C#5\",\"D5\",\"D#5\",\"E5\",\"F5\",\"F#5\",\"G5\",\"G#5\",\"A5\",\"A#5\",\"B5\",\"C6\",\"C#6\",\"D6\",\"D#6\",\"E6\",\"F6\",\"F#6\",\"G6\",\"G#6\",\"A6\",\"A#6\",\"B6\" ]\n\nconst makeChordCode = (...arr) => {\n  // takes array of musical notes,\n  // e.g. [\"C4\", \"D#4\", \"G4\"]\n  // returns semitone intervals (root note included in output)\n  //e.g. [4, 7]\n  let chord = []\n  arr.map(c => chord.push(sortingArr.indexOf(c)))\n  return chord.map(c=>c-chord[0])\n}\n\nconst findChordTypes = str => {\n  // str is the chord code e.g. \".4.7.11\"\n  // chord is an object e.g. {code: \".5.7\", name: \"sus4\"}\n  const chord = chordTypes.find((el) => el.code === str)\n  return chord === undefined ? `` :chord.name\n}\n\n//\n// Add and Remove CSS Classes\n// get the DOM element via data-key and use it if not null\n\nconst addNote = e => {\n  if (document.querySelector(`.key[data-key=\"${e.keyCode}\"]`)) {\n    // oneNote is the musical note name e.g. C OR F\n    let oneNote = document.querySelector(`.key[data-key=\"${e.keyCode}\"] .js-note`).textContent\n    if ( event.repeat != undefined ) {\n      allowed = !event.repeat\n    }\n    if ( !allowed ) return\n    allowed = false\n    if (notesArr.includes(oneNote))\n      skippedNote = true\n    if (oneNote && !notesArr.includes(oneNote)) {\n      notesArr.push(oneNote)\n    }\n    let theChordCode = makeChordCode(...notesArr\n      .sort((a,b)=>sortingArr.indexOf(a)-sortingArr.indexOf(b)))\n      .join(\".\")\n      .toString()\n      console.log(theChordCode)\n    if (theChordCode !== ``) {\n      result.innerHTML = `Chord: ${notesArr[0].replace(/\\d/g, '')} ${findChordTypes(theChordCode)}`\n    }\n  }\n}\n\nconst removeNote = e => {\n  if (document.querySelector(`.key[data-key=\"${e.keyCode}\"]`)) {\n    let oneNote = document.querySelector(`.key[data-key=\"${e.keyCode}\"] .js-note`).textContent\n    allowed = true\n    if (oneNote && skippedNote !== true) {\n      notesArr.pop(oneNote)\n    }\n    skippedNote = false\n    let theChordCode = makeChordCode(...notesArr\n      .sort((a,b)=>sortingArr.indexOf(a)-sortingArr.indexOf(b)))\n      .join(\".\")\n      .toString()\n    console.log(theChordCode)\n    if (notesArr === undefined || notesArr.length === 0) {\n      result.innerHTML = `Chord:`\n    } else {\n      result.innerHTML = `Chord: ${notesArr[0].replace(/\\d/g, '')} ${findChordTypes(theChordCode)}`\n    }\n  }\n}\n\nconst removePlaying = e => {\n  const keyRemove = document.querySelector(`.key[data-key=\"${e.keyCode}\"]`)\n  if ( keyRemove !== null ) keyRemove.classList.remove(`playing`)\n}\n\nconst addPlaying = e => {\n  const keyAdd = document.querySelector(`.key[data-key=\"${e.keyCode}\"]`)\n  if ( keyAdd !== null ) keyAdd.classList.add(`playing`)\n}\n\nwindow.addEventListener(\"keydown\", e => {\n  addNote(e)\n  addPlaying(e)\n})\n\nwindow.addEventListener(\"keyup\", e => {\n  removeNote(e)\n  removePlaying(e)\n})\n\n","let context = null;\nlet oscillator = null;\n\nconst getOrCreateContext = () => {\n  if (!context) {\n    context = new AudioContext();\n    oscillator = context.createOscillator();\n    oscillator.type = \"triangle\";\n    oscillator.connect(context.destination);\n  }\n  return context;\n};\n\nlet isStarted = false;\n\nconst noteOn = midiNote => {\n  getOrCreateContext();\n  const freq = Math.pow(2, (midiNote - 69) / 12) * 440;\n  oscillator.frequency.setTargetAtTime(freq, context.currentTime, 0);\n  if (!isStarted) {\n    oscillator.start(0);\n    isStarted = true;\n  } else {\n    context.resume();\n  }\n};\n\nconst noteOff = () => {\n  context.suspend();\n};\n\n// Below is keyboard emulation for C4-F5 a-' keys\nconst emulatedKeys = {\n  a: 60,\n  w: 61,\n  s: 62,\n  e: 63,\n  d: 64,\n  f: 65,\n  t: 66,\n  g: 67,\n  y: 68,\n  h: 69,\n  u: 70,\n  j: 71,\n  k: 72,\n  o: 73,\n  l: 74,\n  p: 75,\n  \";\": 76,\n  \"'\": 77\n};\n\ndocument.addEventListener(\"keydown\", e => {\n  const key = document.querySelector(`.key[data-key=\"${e.keyCode}\"]`);\n  // console.log(e);\n  if (emulatedKeys.hasOwnProperty(e.key)) {\n    noteOn(emulatedKeys[e.key]);\n    key.classList.add('playing');\n    setTimeout(() => {\n      key.classList.remove('playing');\n    }, 100);\n  }\n});\n\ndocument.addEventListener(\"keyup\", e => {\n  if (emulatedKeys.hasOwnProperty(e.key)) {\n    noteOff();\n  }\n});"]}
{"version":3,"sources":["intervals.js","main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["// const note1 = document.getElementById(\"note1Field\")\n// const note2 = document.getElementById(\"note2Field\")\n// const note3 = document.getElementById(\"note3Field\")\n// const note4 = document.getElementById(\"note4Field\")\n// const button = document.getElementById(\"submitGuess\")\nconst result = document.getElementById(\"result\")\n\nlet allowed = true\nlet notesArr = []\nlet skippedNote = false\nconst chordTypes = [\n  {\n    \"code\": \".\",\n    \"name\": \"\",\n  },\n  {\n    \"code\": \".4\",\n    \"name\": \"\",\n  },\n  {\n    \"code\": \".3\",\n    \"name\": \"m\",\n  },\n  {\n    \"code\": \".6\",\n    \"name\": \"♭5\",\n  },\n  {\n    \"code\": \".7\",\n    \"name\": \"5\",\n  },\n  {\n    \"code\": \".4.7\",\n    \"name\": \"\"\n  },\n  {\n    \"code\": \".3.8\",\n    \"name\": \"first inv\"\n  },\n  {\n    \"code\": \".5.9\",\n    \"name\": \" second inv\"\n  },\n  // {\n  //   \"code\": {\n  //     \".4.7\": \"root\",\n  //     \".3.8\": \"first inversion\",\n  //     \".5.9\": \"second inverstion\"\n  //   },\n  //   \"name\": \"\",\n  // },\n  {\n    \"code\": \".5.7\",\n    \"name\": \"sus4\"\n  },\n  {\n    \"code\": \".2.7\",\n    \"name\": \"sus2\"\n  },\n  {\n    \"code\": \".1.7\",\n    \"name\": \"no3/5(♭9)\"\n  },\n  {\n    \"code\": \".6.7\",\n    \"name\": \"no3/5(#11)\"\n  },\n  {\n    \"code\": \".6.7.11\",\n    \"name\": \"no3/5/maj7(#11)\"\n  },\n  {\n    \"code\": \".7.10\",\n    \"name\": \"no3/5 7\"\n  },\n  {\n    \"code\": \".4.7.14\",\n    \"name\": \"(add9)\"\n  },\n  {\n    \"code\": \".4.7.9\",\n    \"name\": \"6\"\n  },\n  {\n    \"code\": \".4.7.11\",\n    \"name\": \"maj7\"\n  },\n  {\n    \"code\": \".4.7.11.2\",\n    \"name\": \"maj7/9\"\n  },\n  {\n    \"code\": \".5.7.11\",\n    \"name\": \"sus4/maj7\"\n  },\n  {\n    \"code\": \".7.11\",\n    \"name\": \"no3/5/maj7\"\n  },\n  {\n    \"code\": \".3.7\",\n    \"name\": \"m\"\n  },\n  {\n    \"code\": \".3.7.13\",\n    \"name\": \"m add ♭9\"\n  },\n  {\n    \"code\": \".3.7.14\",\n    \"name\": \"m add9\"\n  },\n  {\n    \"code\": \".3.7.17\",\n    \"name\": \"m add11\"\n  },\n  {\n    \"code\": \".3.7.9\",\n    \"name\": \"m6\"\n  },\n  {\n    \"code\": \".3.7.8\",\n    \"name\": \"m ♭6\"\n  },\n  {\n    \"code\": \".3.7.10\",\n    \"name\": \"m7\"\n  },\n  {\n    \"code\": \".3.7.11\",\n    \"name\": \"m maj7\"\n  },\n  {\n    \"code\": \".3.6.10\",\n    \"name\": \"m7 ♭5\"\n  },\n  {\n    \"code\": \".4.7.10\",\n    \"name\": \"7\"\n  },\n  {\n    \"code\": \".2.7.9\",\n    \"name\": \"6 sus2\"\n  },\n  {\n    \"code\": \".5.7.10\",\n    \"name\": \"7 sus4\"\n  },\n  {\n    \"code\": \".4.8\",\n    \"name\": \"aug\"\n  },\n  {\n    \"code\": \".3.6\",\n    \"name\": \"dim\"\n  },\n  {\n    \"code\": \".3.6.9\",\n    \"name\": \"dim7\"\n  },\n  {\n    \"code\": \".3.6.13\",\n    \"name\": \"dim ♭9\"\n  },\n  {\n    \"code\": \".3.6.14\",\n    \"name\": \"dim 9\"\n  },\n  {\n    \"code\": \".3.6.17\",\n    \"name\": \"dim 11\"\n  },\n  // {\n  //   \"code\": \".3.8\",\n  //   \"name\": \"major first inversion\"\n  // },\n  // {\n  //   \"code\": \".5.9\",\n  //   \"name\": \"major second inversion\"\n  // }\n]\n\nconst makeChordCode = (...arr) => {\n  let chord = []\n  // array of musical notes\n  const notesArrChordCode = [\n    \"C\",\n    \"C#\",\n    \"D\",\n    \"D#\",\n    \"E\",\n    \"F\",\n    \"F#\",\n    \"G\",\n    \"G#\",\n    \"A\",\n    \"A#\",\n    \"B\",\n    \"C\",\n    \"C#\",\n    \"D\",\n    \"D#\",\n    \"E\",\n    \"F\",\n    \"F#\",\n    \"G\",\n    \"G#\",\n    \"A\",\n    \"A#\",\n    \"B\",\n    \"C\",\n    \"C#\",\n    \"D\",\n    \"D#\",\n    \"E\",\n    \"F\",\n    \"F#\",\n    \"G\",\n    \"G#\",\n    \"A\",\n    \"A#\",\n    \"B\"\n  ]\n  for (let i=1; i < arr.length; i++) {\n    let current = notesArrChordCode.indexOf( arr[i] )\n    let first = notesArrChordCode.indexOf( arr[0] )\n    if (Math.sign(current - first) !== -1) {\n      chord.push(current - first)\n    } else {\n      chord.push((current - first)+12)}\n    }\n  return chord\n}\n\nconst findChordTypes = str => {\n  // str is the chord code e.g. \".4.7.11\"\n  // theResult is an object e.g. {code: \".5.7\", name: \"sus4\"}\n  const theResult = chordTypes.find((el) => el.code === str)\n  if (theResult !== undefined)\n    return theResult.name\n}\n\n//\n// Add and Remove CSS Classes\n// get the DOM element via data-key and use it if not null\n\nconst removePlaying = e => {\n  const keyRemove = document.querySelector(`.key[data-key=\"${e.keyCode}\"]`)\n  if ( keyRemove !== null ) keyRemove.classList.remove(`playing`)\n}\n\nconst addPlaying = e => {\n  const keyAdd = document.querySelector(`.key[data-key=\"${e.keyCode}\"]`)\n  if ( keyAdd !== null ) keyAdd.classList.add(`playing`)\n}\n\n// const sort = (str) => {\n//     let itemsOrdered = []\n//     const theOrder = [65, 87, 83, 69, 68, 70, 84, 71, 89, 72, 85, 74, 75, 79, 76, 80, 186, 222, 221, 220]\n//     for (var j = 0; j <= str.length; j++) {\n//         if (notesArr.indexOf(theOrder[j]) > -1) {\n//             itemsOrdered.push(theOrder[j]);\n//         }\n//     console.log(itemsOrdered);\n//     console.log(str)\n//     }\n// }\n\nconst addNote = e => {\n  if (document.querySelector(`.key[data-key=\"${e.keyCode}\"]`)) {\n    // oneNote is the musical note name e.g. C OR F\n    let oneNote = document.querySelector(`.key[data-key=\"${e.keyCode}\"] .js-note`).textContent\n    if ( event.repeat != undefined ) {\n      allowed = !event.repeat\n    }\n    if ( !allowed ) return\n    allowed = false\n    if (notesArr.includes(oneNote))\n      skippedNote = true\n    if (oneNote && !notesArr.includes(oneNote)) {\n      notesArr.push(oneNote)\n    }\n    let theChordCode = (makeChordCode(...notesArr))\n    .join(\".\").toString()\n    if (theChordCode !== ``) {\n      theChordCode = `.`.concat(theChordCode)\n      result.innerHTML = `Chord: ${notesArr[0]} ${findChordTypes(theChordCode)}`\n    }\n  }\n}\n\nconst removeNote = e => {\n  if (document.querySelector(`.key[data-key=\"${e.keyCode}\"]`)) {\n    let oneNote = document.querySelector(`.key[data-key=\"${e.keyCode}\"] .js-note`).textContent\n\n    allowed = true\n\n    if (oneNote && skippedNote !== true) {\n      notesArr.pop(oneNote)\n    }\n\n    skippedNote = false\n\n    let theChordCode = (makeChordCode(...notesArr)).join(`.`).toString()\n    theChordCode = `.`.concat(theChordCode)\n\n    if (notesArr === undefined || notesArr.length === 0) {\n      result.innerHTML = `Chord:`\n    } else {\n      result.innerHTML = `Chord: ${notesArr[0]} ${findChordTypes(theChordCode)}`\n    }\n  }\n}\n\nwindow.addEventListener(\"keydown\", e => {\n  addNote(e)\n  addPlaying(e)\n})\n\nwindow.addEventListener(\"keyup\", e => {\n  removeNote(e)\n  removePlaying(e)\n})\n\n// const sort = (str) => {\n//     let itemsOrdered = []\n//     const theOrder = [65, 87, 83, 69, 68, 70, 84, 71, 89, 72, 85, 74, 75, 79, 76, 80, 186, 222, 221, 220]\n//     for (var j = 0; j <= str.length; j++) {\n//         if (notesArr.indexOf(theOrder[j]) > -1) {\n//             itemsOrdered.push(theOrder[j]);\n//         }\n//     console.log(itemsOrdered);\n//     console.log(str)\n//     }\n// }","let context = null;\nlet oscillator = null;\n\nconst getOrCreateContext = () => {\n  if (!context) {\n    context = new AudioContext();\n    oscillator = context.createOscillator();\n    oscillator.type = \"triangle\";\n    oscillator.connect(context.destination);\n  }\n  return context;\n};\n\nlet isStarted = false;\n\nconst noteOn = midiNote => {\n  getOrCreateContext();\n  const freq = Math.pow(2, (midiNote - 69) / 12) * 440;\n  oscillator.frequency.setTargetAtTime(freq, context.currentTime, 0);\n  if (!isStarted) {\n    oscillator.start(0);\n    isStarted = true;\n  } else {\n    context.resume();\n  }\n};\n\nconst noteOff = () => {\n  context.suspend();\n};\n\n// Below is keyboard emulation for C4-F5 a-' keys\nconst emulatedKeys = {\n  a: 60,\n  w: 61,\n  s: 62,\n  e: 63,\n  d: 64,\n  f: 65,\n  t: 66,\n  g: 67,\n  y: 68,\n  h: 69,\n  u: 70,\n  j: 71,\n  k: 72,\n  o: 73,\n  l: 74,\n  p: 75,\n  \";\": 76,\n  \"'\": 77\n};\n\ndocument.addEventListener(\"keydown\", e => {\n  const key = document.querySelector(`.key[data-key=\"${e.keyCode}\"]`);\n  // console.log(e);\n  if (emulatedKeys.hasOwnProperty(e.key)) {\n    noteOn(emulatedKeys[e.key]);\n    key.classList.add('playing');\n    setTimeout(() => {\n      key.classList.remove('playing');\n    }, 100);\n  }\n});\n\ndocument.addEventListener(\"keyup\", e => {\n  if (emulatedKeys.hasOwnProperty(e.key)) {\n    noteOff();\n  }\n});"]}